#      .
#     / V\
#   / `  /
#  <<   |    External Secret example for matrix-appservice-irc.
#  /    |    Provide registration tokens and media proxy signing key via pre-created Secrets.
#  /    |    Note: template/lint output may show missing-secret info until those Secrets exist.
#

host: irc-media.example.com

homeserver:
  url: http://ess-synapse.ess.svc.cluster.local:8008
  domain: matrix.example.com

# Create registration token Secret:
# kubectl -n <namespace> create secret generic matrix-appservice-irc-registration-secrets \
#   --from-literal=asToken="$(openssl rand -hex 32)" \
#   --from-literal=hsToken="$(openssl rand -hex 32)"
registration:
  existingSecret: matrix-appservice-irc-registration-secrets
  managedSecret:
    enabled: false
  autoGenerate: false

# Create media proxy signing key Secret:
# kubectl -n <namespace> create secret generic matrix-appservice-irc-media-proxy-signing-key \
#   --from-literal=media-proxy-signing-key.jwk='{"kty":"oct","alg":"HS512","k":"REPLACE_WITH_BASE64URL_KEY","key_ops":["sign","verify"]}'
#
# Generate REPLACE_WITH_BASE64URL_KEY value:
# openssl rand -base64 48 | tr '+/' '-_' | tr -d '='
mediaProxy:
  existingSecret: matrix-appservice-irc-media-proxy-signing-key
  managedSecret:
    enabled: false
  autoGenerate: false
